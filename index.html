<!DOCTYPE html>
<html>
<head>
    <title>Live HRV Tracker</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="static/style.css">
</head>
<body>
    <div class="container">
        <div class="device-selection">
            <button id="btn-search"> Search Devices</button>
            <progress id="search-progress" value="0" max="100"> 0% </progress>
        </br>
            <select id="device-select" disabled>
                <option value="">-- Select a Device --</option>
            </select>
            <button id="btn-connect" disabled>Connect</button>
            <button id="btn-disconnect" disabled>Disconnect</button>

        </div>
        <div class="controls">
            <h3>Recording Controls <button id="btn-open-setting"> ⚙️ </button> </h3> 
            <button id="btn-start" disabled>Start Recording</button>
            <button id="btn-pause-resume" disabled>Pause</button>
            <button id="btn-end" disabled>End Recording</button>
        </div>

        <!-- <h3>Live Time<span style="font-size: 1ch;">(seconds)</span> <span id="live-time"> -- </span> </h3> -->
        <div class="interval-panel">
        <div class="interval-row">
            <button id="newIntervalBtn">＋ New Interval</button>
            <span class="live-time">
            ⏱ Time: <span id="live-time">0.0</span>
            </span>
        </div>

        <div class="interval-editor hidden" id="intervalEditor">
            <label>
            Start
            <input type="number" step="0.1" id="intervalStart">
            </label>

            <label>
            End
            <input type="number" step="0.1" id="intervalEnd">
            </label>

            <label>
            Color
            <input type="color" id="intervalColor">
            </label>

            <button id="saveIntervalBtn">Save</button>
            <button id="cancelIntervalBtn">Cancel</button>
        </div>
        </div>

        <div id="rmssd-scroll-container" class="scroll-container">
            <h3>Live HRV<span style="font-size: 1ch;">(rmssd)</span> <span id="live-rmssd-value"> -- </span> </h3> 
            <div id="rmssd-chart-container" class="chart-container">
            <canvas id="rmssd-chart" class="chart"></canvas>
        </div></div>

        <div id="rri-scroll-container" class="scroll-container">
            <h3>Live RRI<span style="font-size: 1ch;">(rmssd)</span> <span id="live-rri-value"> -- </span> </h3> 
            
            <div id="rri-chart-container" class="chart-container">
            <canvas id="rri-chart" class="chart"></canvas>
        </div></div>

        <button id="btn-import"> Import </button>
        <input type="file" id="file-input" accept=".csv,text/csv" style="display:none"/>

        <button id="btn-export"> Export </button>


    </div>




    <div id="setting">
        <h3> Settings </h3>
        <p> Show Graphs of: </p>
            <label> &nbsp; RMSSD </label>   <input id='setting-display-rmssd' type="checkbox" value="rmssd" checked="True"> <br>
            <label> &nbsp; Raw RRI </label>   <input id='setting-display-raw-rri' type="checkbox" value="raw-rri"> <br>
            <!-- <label> &nbsp; ECG/EKG </label>   <input id='setting-display-ecg' type="checkbox" value="ecg"> <br> -->
        <br>
        <p> RRIs used in calculating Sliding Window RMSSD</p>
            <label> &nbsp; Min RRIs used: </label> <input id="setting-min-rri-rmssd" type="number" value="5"> <br>
            <label> &nbsp; Max RRIs used: </label> <input id="setting-max-rri-rmssd" type="number" value="5"> <br>
            <label> &nbsp; RRI Artifact Removal Cap (ms): </label> <input id="setting-rri-artifact-removal-cap" type="number" value="160"> <br>
        <br><br>
        <div>
            <button id="btn-save-setting"> Save </button>
            <button id="btn-close-setting"> Close </button>
        </div>
    </div>

    <script src="static/helper.js"></script>
    <script src="static/main.js"></script>
    <script src="static/view.js"></script>
    <script src="static/chart.js"></script>
    <script src="static/interval.js"></script>
    <script src="static/btnControl.js"></script>


</body>
</html>